var __decorate=this&&this.__decorate||function(d,a,b,c){var e=arguments.length,f=3>e?a:null===c?c=Object.getOwnPropertyDescriptor(a,b):c,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(d,a,b,c);else for(var h=d.length-1;0<=h;h--)if(g=d[h])f=(3>e?g(f):3<e?g(a,b,f):g(a,b))||f;return 3<e&&f&&Object.defineProperty(a,b,f),f},__metadata=this&&this.__metadata||function(d,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(d,
a)},core_1=require("@angular/core"),IntegralUIDataService=function(){function d(){this.data=[]}d.prototype.init=function(a){for(var b=0;b<a.length;b++){var c={data:a[b].data,fields:this.getDataFields(a[b].fields),key:a[b].key};this.data.push(c)}};d.prototype.getDataFields=function(a){return a?{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.objects?a.objects:"items",statusIcon:a.statusIcon?a.statusIcon:"statusIcon",subobjects:a.subobjects?
a.subobjects:"subitems",text:a.text?a.text:"text"}:{content:"content",icon:"icon",id:"id",pid:"pid",objects:"items",statusIcon:"statusIcon",subobjects:"subitems",text:"text"}};d.prototype.updateDataFields=function(a,b){var c=this.getData(b);c&&(c.fields=this.getDataFields(a))};d.prototype.clear=function(a,b){this.getList(a,b).length=0};d.prototype.insertAt=function(a,b,c,e){this.insert(a,b,c,null,!1,e)};d.prototype.insert=function(a,b,c,e,f,d){a&&(e=this.getData(d))&&(e=e.fields,a[e.pid]=c?c[e.id]:
"",c=this.getList(c,d))&&(0>b||null===b||void 0===b?c.push(a):(b=Math.max(Math.min(b,c.length),0),c.splice(b,0,a)),a[e.id]||(a[e.id]=this.getUniqueId()))};d.prototype.insertByRef=function(a,b,c,e){if(a&&b){var f=this.getParent(b,e),d=this.getList(f,e).indexOf(b);c&&(d+=1);this.insert(a,d,f,b,c,e);return d}};d.prototype.removeAt=function(a,b,c,e){var f,d=null,h=this.getData(e);if(h){a&&(c=this.getParent(a,e),f=this.getList(c,e),b=f.indexOf(a));if(null===b||void 0===b)return{obj:d,result:!1};f=this.getList(c,
e);if(0<=b&&b<f.length)return d=f[b],d[h.fields.pid]="",f.splice(b,1),{obj:d,result:!0}}return{obj:d,result:!1}};d.prototype.clone=function(a,b,c){var e=this.getData(c);if(e){var e=e.fields,d={id:this.getUniqueId(),icon:a[e.icon],text:a[e.text]};b&&(d[e.pid]=b);if(a[e.objects]&&0<a[e.objects].length)for(d[e.objects]||(d[e.objects]=[]),b=0;b<a[e.objects].length;b++)d[e.objects].push(this.clone(a[e.objects][b],d[e.id],c));return d}return{}};d.prototype.findObjectById=function(a,b){var c=this.getData(b);
if(c){var e=c.fields,c=c.data;return a?this.searchObj(a,c,e):null}return null};d.prototype.findObjectByText=function(a,b){var c=this.getData(b);if(c){var e=c.fields,c=c.data;return void 0!=a?this.searchObj(a,c,e,"text"):null}return null};d.prototype.searchObj=function(a,b,c,e){var d=null;if(a&&b)for(var g=0,h=!1;!d&&g<b.length;){switch(e){case "text":b[g][c.text]&&(h=b[g][c.text].toString()===a.toString());break;default:b[g][c.id]&&(h=b[g][c.id].toString()===a.toString())}d=h?b[g]:this.searchObj(a,
b[g][c.objects],c,e);g++}return d};d.prototype.findParent=function(a,b,c){var e=null;if(a&&b)for(var d=0;!e&&d<b.length;)e=b[d][c.id]&&a[c.pid]&&b[d][c.id].toString()===a[c.pid].toString()?b[d]:this.findParent(a,b[d][c.objects],c),d++;return e};d.prototype.getData=function(a){var b=null;if(!this.getKey(a)&&0<this.data.length)b=this.data[0];else for(var c=0;c<this.data.length;c++)if(this.data[c].key==a){b=this.data[c];break}return b};d.prototype.getKey=function(a){return a?a:null};d.prototype.getList=
function(a,b){var c=this.getData(b);if(c){var d=c.fields;return a?(a[d.objects]||(a[d.objects]=[]),a[d.objects]):c.data}return[]};d.prototype.getParent=function(a,b){if(a){var c=this.getData(b);if(c)return this.findParent(a,c.data,c.fields)}return null};d.prototype.getUniqueId=function(a){function b(){return(65536*(1+Math.random())|0).toString(16).substring(1)}a=a||"-";return b()+b()+a+b()+a+b()+a+b()+a+b()+b()+b()};return d=__decorate([core_1.Injectable(),__metadata("design:paramtypes",[])],d)}();
exports.IntegralUIDataService=IntegralUIDataService;